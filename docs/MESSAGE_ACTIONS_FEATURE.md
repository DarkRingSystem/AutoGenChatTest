# æ¶ˆæ¯æ“ä½œåŠŸèƒ½

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

ä¸ºç”¨æˆ·æ¶ˆæ¯å’Œæ™ºèƒ½ä½“æ¶ˆæ¯æ·»åŠ äº†ä¾¿æ·çš„æ“ä½œæŒ‰é’®ï¼Œæå‡ç”¨æˆ·ä½“éªŒå’Œå·¥ä½œæ•ˆç‡ã€‚

## âœ¨ æ–°åŠŸèƒ½

### 1. ç”¨æˆ·æ¶ˆæ¯æ“ä½œï¼ˆå·¦ä¾§æŒ‰é’®ï¼‰

#### ğŸ”„ é‡æ–°å‘é€
- **åŠŸèƒ½**ï¼šä¸€é”®é‡æ–°å‘é€ç”¨æˆ·æ¶ˆæ¯
- **å›¾æ ‡**ï¼š<RedoOutlined />
- **ä½ç½®**ï¼šç”¨æˆ·æ¶ˆæ¯æ°”æ³¡å·¦ä¾§
- **ç”¨é€”**ï¼šå¿«é€Ÿé‡è¯•ç›¸åŒçš„é—®é¢˜ï¼Œæ— éœ€é‡æ–°è¾“å…¥

#### âœï¸ ç¼–è¾‘æ¶ˆæ¯
- **åŠŸèƒ½**ï¼šç¼–è¾‘å·²å‘é€çš„æ¶ˆæ¯å¹¶é‡æ–°å‘é€
- **å›¾æ ‡**ï¼š<EditOutlined />
- **ä½ç½®**ï¼šç”¨æˆ·æ¶ˆæ¯æ°”æ³¡å·¦ä¾§
- **ç”¨é€”**ï¼šä¿®æ”¹é—®é¢˜åé‡æ–°æé—®

**ç¼–è¾‘æ¨¡å¼**ï¼š
- ç‚¹å‡»ç¼–è¾‘æŒ‰é’®åï¼Œæ¶ˆæ¯å†…å®¹å˜ä¸ºå¯ç¼–è¾‘çš„æ–‡æœ¬æ¡†
- æä¾›"ä¿å­˜å¹¶å‘é€"å’Œ"å–æ¶ˆ"ä¸¤ä¸ªæŒ‰é’®
- ä¿å­˜åè‡ªåŠ¨é‡æ–°å‘é€ä¿®æ”¹åçš„æ¶ˆæ¯

### 2. æ™ºèƒ½ä½“æ¶ˆæ¯æ“ä½œï¼ˆå³ä¾§æŒ‰é’®ï¼‰

#### ğŸ“‹ å¤åˆ¶å†…å®¹
- **åŠŸèƒ½**ï¼šä¸€é”®å¤åˆ¶æ™ºèƒ½ä½“å›ç­”åˆ°å‰ªè´´æ¿
- **å›¾æ ‡**ï¼š<CopyOutlined />
- **ä½ç½®**ï¼šæ™ºèƒ½ä½“æ¶ˆæ¯æ°”æ³¡å³ä¾§
- **ç”¨é€”**ï¼šå¿«é€Ÿå¤åˆ¶å›ç­”å†…å®¹åˆ°å…¶ä»–åœ°æ–¹ä½¿ç”¨

**å¤åˆ¶é€»è¾‘**ï¼š
- **æ™®é€šæ¨¡å¼**ï¼šå¤åˆ¶å•ä¸ª AI å›ç­”
- **å›¢é˜Ÿæ¨¡å¼**ï¼šå¤åˆ¶æ‰€æœ‰æ™ºèƒ½ä½“çš„å›ç­”ï¼Œæ ¼å¼åŒ–ä¸º Markdown

#### ğŸ’¾ ä¿å­˜ä¸º Markdown
- **åŠŸèƒ½**ï¼šå°†æ™ºèƒ½ä½“å›ç­”ä¿å­˜ä¸º .md æ–‡ä»¶
- **å›¾æ ‡**ï¼š<SaveOutlined />
- **ä½ç½®**ï¼šæ™ºèƒ½ä½“æ¶ˆæ¯æ°”æ³¡å³ä¾§
- **ç”¨é€”**ï¼šæ°¸ä¹…ä¿å­˜é‡è¦çš„å›ç­”å†…å®¹

**ä¿å­˜æ ¼å¼**ï¼š
- **æ™®é€šæ¨¡å¼**ï¼š`ai-response-YYYY-MM-DD-HH-MM-SS.md`
- **å›¢é˜Ÿæ¨¡å¼**ï¼š`testcase-team-YYYY-MM-DD-HH-MM-SS.md`
- åŒ…å«ç”Ÿæˆæ—¶é—´å’Œå®Œæ•´çš„ Markdown æ ¼å¼

## ğŸ¨ UI è®¾è®¡

### æŒ‰é’®å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  [ğŸ”„] [âœï¸]  ğŸ‘¤ ç”¨æˆ·æ¶ˆæ¯æ°”æ³¡                      â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚              ğŸ¤– æ™ºèƒ½ä½“æ¶ˆæ¯æ°”æ³¡  [ğŸ“‹] [ğŸ’¾]        â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº¤äº’æ•ˆæœ

1. **æ‚¬åœæ˜¾ç¤º**ï¼šé¼ æ ‡æ‚¬åœåœ¨æ¶ˆæ¯ä¸Šæ—¶ï¼Œæ“ä½œæŒ‰é’®æ·¡å…¥æ˜¾ç¤º
2. **æ‚¬åœæ”¾å¤§**ï¼šé¼ æ ‡æ‚¬åœåœ¨æŒ‰é’®ä¸Šæ—¶ï¼ŒæŒ‰é’®æ”¾å¤§ 1.1 å€
3. **ç‚¹å‡»ç¼©å°**ï¼šç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒæŒ‰é’®ç¼©å°åˆ° 0.9 å€
4. **æ¯›ç»ç’ƒæ•ˆæœ**ï¼šæŒ‰é’®èƒŒæ™¯ä½¿ç”¨æ¯›ç»ç’ƒæ•ˆæœï¼ˆbackdrop-filterï¼‰
5. **æ¸å˜é«˜äº®**ï¼šæ‚¬åœæ—¶æ˜¾ç¤ºç´«è‰²æ¸å˜é«˜äº®

### ç¼–è¾‘æ¨¡å¼ UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ å¯ç¼–è¾‘çš„æ–‡æœ¬æ¡†                               â”‚ â”‚
â”‚ â”‚ ç”¨æˆ·å¯ä»¥ä¿®æ”¹æ¶ˆæ¯å†…å®¹                         â”‚ â”‚
â”‚ â”‚                                             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                 â”‚
â”‚              [âœ… ä¿å­˜å¹¶å‘é€] [âŒ å–æ¶ˆ]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. é‡æ–°å‘é€æ¶ˆæ¯

```javascript
const handleResendMessage = async (messageId) => {
  const msg = messages.find(m => m.id === messageId);
  if (!msg || msg.role !== 'user') return;
  
  console.log('ğŸ”„ é‡æ–°å‘é€æ¶ˆæ¯:', msg.content);
  await handleStreamingChat(msg.content);
  message.success('æ¶ˆæ¯å·²é‡æ–°å‘é€');
};
```

### 2. ç¼–è¾‘æ¶ˆæ¯

```javascript
// å¼€å§‹ç¼–è¾‘
const handleEditMessage = (messageId) => {
  const msg = messages.find(m => m.id === messageId);
  if (!msg || msg.role !== 'user') return;
  
  setEditingMessageId(messageId);
  setEditingContent(msg.content);
};

// ä¿å­˜ç¼–è¾‘
const handleSaveEdit = async (messageId) => {
  if (!editingContent.trim()) {
    message.warning('æ¶ˆæ¯å†…å®¹ä¸èƒ½ä¸ºç©º');
    return;
  }

  // æ›´æ–°æ¶ˆæ¯å†…å®¹
  setMessages(prev =>
    prev.map(msg =>
      msg.id === messageId ? { ...msg, content: editingContent } : msg
    )
  );

  // é‡æ–°å‘é€
  await handleStreamingChat(editingContent);
  
  // æ¸…é™¤ç¼–è¾‘çŠ¶æ€
  setEditingMessageId(null);
  setEditingContent('');
  message.success('æ¶ˆæ¯å·²æ›´æ–°å¹¶é‡æ–°å‘é€');
};

// å–æ¶ˆç¼–è¾‘
const handleCancelEdit = () => {
  setEditingMessageId(null);
  setEditingContent('');
  message.info('å·²å–æ¶ˆç¼–è¾‘');
};
```

### 3. å¤åˆ¶æ¶ˆæ¯

```javascript
const handleCopyMessage = async (messageId) => {
  const msg = messages.find(m => m.id === messageId);
  if (!msg || msg.role !== 'assistant') return;

  try {
    let textToCopy = '';
    
    if (msg.isTeamMode && msg.agents) {
      // å›¢é˜Ÿæ¨¡å¼ï¼šå¤åˆ¶æ‰€æœ‰æ™ºèƒ½ä½“çš„å›ç­”
      textToCopy = msg.agents
        .map(agent => `## ${agent.name}\n\n${agent.content}`)
        .join('\n\n---\n\n');
    } else {
      // æ™®é€šæ¨¡å¼ï¼šå¤åˆ¶å•ä¸ªå›ç­”
      textToCopy = msg.content;
    }

    await navigator.clipboard.writeText(textToCopy);
    message.success('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
  } catch (err) {
    console.error('å¤åˆ¶å¤±è´¥:', err);
    message.error('å¤åˆ¶å¤±è´¥');
  }
};
```

### 4. ä¿å­˜ä¸º Markdown

```javascript
const handleSaveMessage = (messageId) => {
  const msg = messages.find(m => m.id === messageId);
  if (!msg || msg.role !== 'assistant') return;

  try {
    let markdownContent = '';
    let filename = '';

    if (msg.isTeamMode && msg.agents) {
      // å›¢é˜Ÿæ¨¡å¼
      const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);
      filename = `testcase-team-${timestamp}.md`;
      
      markdownContent = `# æµ‹è¯•ç”¨ä¾‹æ™ºèƒ½ä½“å›¢é˜Ÿå›ç­”\n\n`;
      markdownContent += `ç”Ÿæˆæ—¶é—´: ${new Date().toLocaleString('zh-CN')}\n\n`;
      markdownContent += `---\n\n`;
      
      msg.agents.forEach(agent => {
        markdownContent += `## ${agent.name}\n\n`;
        markdownContent += `${agent.content}\n\n`;
        markdownContent += `---\n\n`;
      });
    } else {
      // æ™®é€šæ¨¡å¼
      const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);
      filename = `ai-response-${timestamp}.md`;
      
      markdownContent = `# AI å›ç­”\n\n`;
      markdownContent += `ç”Ÿæˆæ—¶é—´: ${new Date().toLocaleString('zh-CN')}\n\n`;
      markdownContent += `---\n\n`;
      markdownContent += msg.content;
    }

    // åˆ›å»º Blob å¹¶ä¸‹è½½
    const blob = new Blob([markdownContent], { type: 'text/markdown;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = filename;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);

    message.success(`å·²ä¿å­˜ä¸º ${filename}`);
  } catch (err) {
    console.error('ä¿å­˜å¤±è´¥:', err);
    message.error('ä¿å­˜å¤±è´¥');
  }
};
```

## ğŸ¨ CSS æ ·å¼

### æ“ä½œæŒ‰é’®å®¹å™¨

```css
.message-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  opacity: 0;
  transition: opacity 0.3s ease;
  align-self: flex-start;
  margin-top: 8px;
}

.message-wrapper:hover .message-actions {
  opacity: 1;
}
```

### æ“ä½œæŒ‰é’®

```css
.action-button {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.05);
  color: rgba(255, 255, 255, 0.7);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.action-button:hover {
  background: rgba(102, 126, 234, 0.2);
  border-color: rgba(102, 126, 234, 0.4);
  color: rgba(255, 255, 255, 0.9);
  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}
```

### ç¼–è¾‘æ–‡æœ¬æ¡†

```css
.edit-message-textarea {
  width: 100%;
  min-height: 100px;
  padding: 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: rgba(255, 255, 255, 0.9);
  font-size: 14px;
  resize: vertical;
  transition: all 0.3s ease;
}

.edit-message-textarea:focus {
  outline: none;
  border-color: rgba(102, 126, 234, 0.5);
  background: rgba(255, 255, 255, 0.08);
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šé‡æ–°å‘é€æ¶ˆæ¯

```
1. ç”¨æˆ·å‘é€ï¼š"ç”Ÿæˆç™»å½•æµ‹è¯•ç”¨ä¾‹"
2. AI å›ç­”å®Œæˆ
3. ç”¨æˆ·æ‚¬åœåœ¨è‡ªå·±çš„æ¶ˆæ¯ä¸Š
4. ç‚¹å‡» [ğŸ”„] æŒ‰é’®
5. ç³»ç»Ÿè‡ªåŠ¨é‡æ–°å‘é€ç›¸åŒçš„æ¶ˆæ¯
```

### ç¤ºä¾‹ 2ï¼šç¼–è¾‘å¹¶é‡æ–°å‘é€

```
1. ç”¨æˆ·å‘é€ï¼š"ç”Ÿæˆç™»å½•æµ‹è¯•ç”¨ä¾‹"
2. AI å›ç­”å®Œæˆ
3. ç”¨æˆ·æ‚¬åœåœ¨è‡ªå·±çš„æ¶ˆæ¯ä¸Š
4. ç‚¹å‡» [âœï¸] æŒ‰é’®
5. æ¶ˆæ¯å˜ä¸ºå¯ç¼–è¾‘çŠ¶æ€
6. ç”¨æˆ·ä¿®æ”¹ä¸ºï¼š"ç”Ÿæˆç™»å½•å’Œæ³¨å†Œæµ‹è¯•ç”¨ä¾‹"
7. ç‚¹å‡» [âœ… ä¿å­˜å¹¶å‘é€]
8. ç³»ç»Ÿå‘é€ä¿®æ”¹åçš„æ¶ˆæ¯
```

### ç¤ºä¾‹ 3ï¼šå¤åˆ¶ AI å›ç­”

```
1. AI å›ç­”å®Œæˆ
2. ç”¨æˆ·æ‚¬åœåœ¨ AI æ¶ˆæ¯ä¸Š
3. ç‚¹å‡» [ğŸ“‹] æŒ‰é’®
4. å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
5. ç”¨æˆ·å¯ä»¥ç²˜è´´åˆ°å…¶ä»–åœ°æ–¹ä½¿ç”¨
```

### ç¤ºä¾‹ 4ï¼šä¿å­˜ä¸º Markdown

```
1. AI å›ç­”å®Œæˆ
2. ç”¨æˆ·æ‚¬åœåœ¨ AI æ¶ˆæ¯ä¸Š
3. ç‚¹å‡» [ğŸ’¾] æŒ‰é’®
4. æµè§ˆå™¨è‡ªåŠ¨ä¸‹è½½ .md æ–‡ä»¶
5. æ–‡ä»¶åï¼šai-response-2025-10-06-14-30-25.md
```

## ğŸ‰ ä¼˜åŠ¿

âœ… **æå‡æ•ˆç‡** - æ— éœ€é‡æ–°è¾“å…¥ï¼Œä¸€é”®é‡å‘æˆ–ç¼–è¾‘  
âœ… **ä¾¿æ·å¤åˆ¶** - å¿«é€Ÿå¤åˆ¶ AI å›ç­”åˆ°å…¶ä»–åœ°æ–¹  
âœ… **æ°¸ä¹…ä¿å­˜** - å°†é‡è¦å›ç­”ä¿å­˜ä¸º Markdown æ–‡ä»¶  
âœ… **ä¼˜é›…äº¤äº’** - æ‚¬åœæ˜¾ç¤ºï¼Œä¸å ç”¨ç©ºé—´  
âœ… **è§†è§‰åé¦ˆ** - åŠ¨ç”»æ•ˆæœï¼Œæ¸…æ™°çš„æ“ä½œåé¦ˆ  
âœ… **ä¸»é¢˜é€‚é…** - æ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜  
âœ… **å›¢é˜Ÿæ¨¡å¼** - æ™ºèƒ½å¤„ç†å›¢é˜Ÿæ¨¡å¼çš„å¤šæ™ºèƒ½ä½“å›ç­”

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

1. **`frontend/src/App.jsx`**
   - æ·»åŠ  `editingMessageId` å’Œ `editingContent` çŠ¶æ€
   - æ·»åŠ  `handleResendMessage()` å‡½æ•°
   - æ·»åŠ  `handleEditMessage()` å‡½æ•°
   - æ·»åŠ  `handleSaveEdit()` å‡½æ•°
   - æ·»åŠ  `handleCancelEdit()` å‡½æ•°
   - æ·»åŠ  `handleCopyMessage()` å‡½æ•°
   - æ·»åŠ  `handleSaveMessage()` å‡½æ•°
   - ä¿®æ”¹æ¶ˆæ¯æ¸²æŸ“ï¼Œæ·»åŠ æ“ä½œæŒ‰é’®
   - æ·»åŠ ç¼–è¾‘æ¨¡å¼ UI

2. **`frontend/src/App.css`**
   - æ·»åŠ  `.message-actions` æ ·å¼
   - æ·»åŠ  `.action-button` æ ·å¼
   - æ·»åŠ  `.edit-message-container` æ ·å¼
   - æ·»åŠ  `.edit-message-textarea` æ ·å¼
   - æ·»åŠ  `.edit-action-button` æ ·å¼
   - æ·»åŠ æ‚¬åœå’ŒåŠ¨ç”»æ•ˆæœ

## ğŸ§ª æµ‹è¯•æ–¹æ³•

1. **åˆ·æ–°æµè§ˆå™¨**ï¼ˆCmd+Shift+Rï¼‰
2. å‘é€ä¸€æ¡æ¶ˆæ¯
3. ç­‰å¾… AI å›ç­”
4. **æ‚¬åœåœ¨ç”¨æˆ·æ¶ˆæ¯ä¸Š**ï¼ŒæŸ¥çœ‹å·¦ä¾§æ“ä½œæŒ‰é’®
5. **æ‚¬åœåœ¨ AI æ¶ˆæ¯ä¸Š**ï¼ŒæŸ¥çœ‹å³ä¾§æ“ä½œæŒ‰é’®
6. æµ‹è¯•å„ä¸ªåŠŸèƒ½ï¼š
   - ç‚¹å‡» [ğŸ”„] é‡æ–°å‘é€
   - ç‚¹å‡» [âœï¸] ç¼–è¾‘æ¶ˆæ¯
   - ç‚¹å‡» [ğŸ“‹] å¤åˆ¶å†…å®¹
   - ç‚¹å‡» [ğŸ’¾] ä¿å­˜æ–‡ä»¶

ç°åœ¨å¯ä»¥æµ‹è¯•æ–°åŠŸèƒ½äº†ï¼ğŸ‰


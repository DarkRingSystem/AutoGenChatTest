# 文件上传功能快速开始指南

## 🚀 5 分钟快速开始

### 第 1 步: 启动服务（1 分钟）

#### 启动后端

**macOS 用户（推荐）**:
```bash
# 打开终端 1
cd backend
./start.sh
```

**Linux/Windows 用户**:
```bash
# 打开终端 1
cd backend
python3 main.py
```

等待看到：
```
✅ 会话管理服务初始化成功！
INFO:     Uvicorn running on http://0.0.0.0:8000
```

#### 启动前端
```bash
# 打开终端 2
cd frontend
npm run dev
```

等待看到：
```
➜  Local:   http://localhost:3002/
```

### 第 2 步: 打开浏览器（10 秒）

访问: http://localhost:3002

### 第 3 步: 选择模式（10 秒）

点击选择：
- **普通对话** - 单个智能体对话
- **测试用例智能体** - 多智能体协作

### 第 4 步: 上传文件（30 秒）

1. 在输入框上方找到文件上传区域
2. 拖拽或点击上传文件
3. 支持的格式：
   - PDF (.pdf)
   - 图片 (.png, .jpg, .jpeg, .gif, .bmp, .tiff)
   - PowerPoint (.pptx, .ppt)
   - Word (.docx, .doc)
   - Excel (.xlsx, .xls)
   - HTML (.html, .htm)
   - EPUB (.epub)

### 第 5 步: 解析文件（1-2 分钟）

1. 点击"开始解析"按钮
2. 等待解析完成
3. 看到 ✅ 图标表示成功

### 第 6 步: 开始提问（1 分钟）

输入问题，例如：
- "总结一下文件内容"
- "文件中的主要观点是什么？"
- "帮我分析这个文档"

按 Enter 发送！

---

## 📝 示例场景

### 场景 1: 分析 PDF 报告

```
1. 上传: report.pdf
2. 解析: 等待完成
3. 提问: "总结这份报告的主要发现"
4. 查看: 智能体基于文件内容的回复
```

### 场景 2: 对比多个文档

```
1. 上传: doc1.pdf, doc2.docx, doc3.pdf
2. 解析: 等待完成
3. 提问: "对比这三个文档的异同点"
4. 查看: 智能体的对比分析
```

### 场景 3: 图片内容识别

```
1. 上传: image.png
2. 解析: 等待完成
3. 提问: "描述一下这张图片的内容"
4. 查看: 智能体的图片分析
```

---

## 🎯 关键功能

### ✅ 文件限制
- 单个文件最大: **100MB**
- 最多文件数: **10 个**
- 前后端双重校验

### ✅ 解析反馈
- 实时进度显示
- 成功/失败状态
- 错误信息提示

### ✅ 上下文集成
- 自动添加文件内容
- 智能体基于文件回答
- 用户消息显示文件标记

---

## 🔍 界面说明

### 文件上传区域
```
┌─────────────────────────────────────┐
│  📁 点击或拖拽文件到此区域上传      │
│  支持 PDF、图片、Office 文档等格式  │
│  单个文件最大 100MB，最多 10 个文件 │
└─────────────────────────────────────┘
```

### 文件列表
```
┌─────────────────────────────────────┐
│ 📎 已选择 2 个文件    [开始解析]    │
├─────────────────────────────────────┤
│ ✅ report.pdf          2.5 MB  [×]  │
│ ✅ data.xlsx           1.2 MB  [×]  │
└─────────────────────────────────────┘
```

### 输入框提示
```
默认:     "输入消息，按 Enter 发送..."
解析中:   "正在解析文件，请稍候..."
已加载:   "已加载 2 个文件，输入问题..."
```

### 用户消息
```
┌─────────────────────────────────────┐
│ 👤 用户                              │
│ 📎 包含 2 个文件                     │
│ 总结一下文件内容                     │
└─────────────────────────────────────┘
```

---

## ⚠️ 注意事项

### 1. 文件大小
- 单个文件不能超过 100MB
- 建议上传较小的文件以提高速度

### 2. 文件数量
- 最多同时上传 10 个文件
- 文件越多，解析时间越长

### 3. 解析时间
- 小文件（< 1MB）: 约 5-10 秒
- 中等文件（1-10MB）: 约 10-30 秒
- 大文件（10-100MB）: 约 30-120 秒

### 4. 支持的格式
- 确保文件格式在支持列表中
- 不支持的格式会被拒绝

### 5. 网络连接
- 确保后端服务正常运行
- 检查网络连接稳定

---

## 🐛 常见问题

### Q1: 上传后没有反应？
**A**: 检查后端服务是否启动
```bash
curl http://localhost:8000/health
```

### Q2: 解析失败？
**A**: 可能原因：
- 文件损坏
- 文件格式不支持
- 文件内容为空

### Q3: 智能体没有基于文件回答？
**A**: 检查：
- 文件是否解析成功（看到 ✅ 图标）
- 用户消息是否显示文件标记（📎）
- 浏览器控制台是否有错误

### Q4: 文件太大无法上传？
**A**: 
- 压缩文件大小
- 或分批上传

### Q5: 解析时间太长？
**A**: 
- 大文件需要更长时间
- 请耐心等待
- 可以查看后端日志了解进度

---

## 📚 更多资源

- **功能总结**: `FILE_UPLOAD_FEATURE_SUMMARY.md`
- **测试指南**: `frontend/FILE_UPLOAD_TEST_GUIDE.md`
- **批量转换指南**: `backend/docs/BATCH_CONVERSION_GUIDE.md`
- **Markdown 转换指南**: `backend/docs/MARKDOWN_CONVERTER_GUIDE.md`

---

## 🎉 开始使用

现在你已经准备好了！

1. ✅ 启动服务
2. ✅ 打开浏览器
3. ✅ 上传文件
4. ✅ 开始提问

享受智能文件分析的乐趣！🚀

